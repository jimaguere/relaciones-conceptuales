<?xml version='1.0' encoding='iso-8859-1' ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">

    <h:head>
        <meta content='text/html; charset=iso-8859-1' http-equiv="Content-Type"/>
    </h:head>

    <h:body>
        <ui:composition template="./../template.xhtml">
            <ui:define name="title">
            </ui:define>
            <ui:define name="body">
                <h:form id="form">    
                    <p:growl/>
                    <p:dialog header="#{bundle.tituloRegistroUsuario}" modal="true" widgetVar="dlg2">     
                        <p:panel id="personal" header="#{bundle.tabPersonal}" >                        
                            <h:panelGrid columns="5">
                                <p:outputLabel value="#{bundle.CreateUsuarioLabel_nombres}" for="nombres" />
                                <p:outputLabel value="#{bundle.CreateUsuarioLabel_apellidos}" for="apellidos" />
                                <p:outputLabel value="#{bundle.CreateUsuarioLabel_correoElectronico}" for="correoElectronico" />
                                <p:outputLabel value="#{bundle.CreateUsuarioLabel_institucion}" for="institucion" />
                                <p:outputLabel value="#{bundle.CreateUsuarioLabel_profesion}" for="profesion" />

                                <p:inputText id="nombres" value="#{registroController.selected.nombres}" title="#{bundle.CreateUsuarioTitle_nombres}" required="true" requiredMessage="#{bundle.CreateUsuarioRequiredMessage_nombres}"/>                           
                                <p:inputText id="apellidos" value="#{registroController.selected.apellidos}" title="#{bundle.CreateUsuarioTitle_apellidos}" required="true" requiredMessage="#{bundle.CreateUsuarioRequiredMessage_apellidos}"/>                                  
                                <p:inputText id="correoElectronico" value="#{registroController.selected.correoElectronico}" title="#{bundle.CreateUsuarioTitle_correoElectronico}" required="true" requiredMessage="#{bundle.CreateUsuarioRequiredMessage_correoElectronico}">
                                    <f:validator validatorId="emailValidator"/>
                                </p:inputText>  
                                <p:inputText id="institucion" 
                                             value="#{registroController.selected.institucion}" 
                                             title="#{bundle.CreateUsuarioTitle_institucion}" 
                                             required="true" 
                                             requiredMessage="#{bundle.CreateUsuarioRequiredMessage_institucion}"
                                             validator="generalValidation"/>
                               
                                <p:inputText id="profesion" 
                                             value="#{registroController.selected.profesion}" 
                                             title="#{bundle.CreateUsuarioTitle_profesion}" 
                                             required="true" 
                                             requiredMessage="#{bundle.CreateUsuarioRequiredMessage_profesion}"
                                             validator="generalValidation"/>                       

                                <p:message for="nombres"/>
                                <p:message for="apellidos"/>
                                <p:message for="correoElectronico"/>
                                <p:message for="institucion"/>
                                <p:message for="profesion"/>  
                            </h:panelGrid>
                        </p:panel>

                        <p:panel id="seguridad" header="#{bundle.tabSeguridad}">                         
                            <h:panelGrid columns="2" border="0">
                                <p:outputLabel value="#{bundle.CreateUsuarioLabel_clave}" for="clave" />
                                <p:outputLabel value="#{bundle.labelConfirmarClave}" for="claveConf" />
                                
                                <p:password id="clave" value="#{registroController.selected.clave}"
                                            title="#{bundle.CreateUsuarioTitle_clave}" 
                                            required="true" 
                                            requiredMessage="#{bundle.CreateUsuarioRequiredMessage_clave}"
                                            validator="paswordValidation"
                                           />                                    
                                <p:password id="claveConf"  
                                            title="#{bundle.CreateUsuarioTitle_clave}" 
                                            required="true"
                                            requiredMessage="#{bundle.CreateUsuarioRequiredMessage_clave}"
                                            immediate="true" value="#{registroController.confirmarClave}"/>  
                       

                                <p:message for="clave"/>
                                <p:message for="claveConf"/>                                
                            </h:panelGrid>

                            <h:panelGrid columns="4" border="0">
                                <p:captcha label="Captcha" id="capcha" validatorMessage="#{bundle.mensajeValidarCapcha}"/>   
                                <p:message for="capcha"/>
                                <p:commandButton action="#{registroController.create}" value="#{bundle.CreateUsuarioSaveLink}" ajax="false"
                                                 update=":form"
                                                 id="bt"/>                                    
                            </h:panelGrid>                             
                        </p:panel>  
                    </p:dialog>
                </h:form>
            </ui:define>
        </ui:composition>
    </h:body>
</html>
